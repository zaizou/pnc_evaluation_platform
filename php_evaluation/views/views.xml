<odoo>
  <data>

  <!--

  Extending survey views

  -->
       <record model="ir.ui.view" id="question_form_view_extend">
            <field name="name">question.form</field>
			<field name="model">survey.question</field>
            <field name="inherit_id" ref="survey.survey_question_form"/>
			<field name="arch" type="xml">
                <xpath expr="//notebook/page[1]" position="after">
                   <page string="Evaluation">
                        <field  name="indicator_id"/>
                    </page>
                </xpath>
            </field>
       </record>


  <!-->
    <record model="ir.ui.view" id="fonction_calcul_form_view">
			<field name="name">fonction_calcul.form</field>
			<field name="model">survey.fonction_calcul</field>
			<field name="arch" type="xml">
				<form string="Calculation Function Form">
                    <sheet>
						<div class="oe_button_box" name="button_box">
                            <field name="menu_ir_values_id" invisible="1"/>
                            <button name="create_action" string="Add in the 'More' menu" type="object"
                                    attrs="{'invisible':[('menu_ir_values_id','!=',False)]}"
                                    help="Display an option on related documents to run this sever action"/>
                            <button name="unlink_action" string="Remove from the 'More' menu" type="object" 
                                    attrs="{'invisible':[('menu_ir_values_id','=',False)]}"
                                    help="Remove the contextual action related to this server action"/>
                        </div>
                        <div class="oe_title">
                            <label for="name" class="oe_edit_only"/>
                            <h1><field name="name" placeholder="e.g. Update order quantity"/></h1>
                        </div>
                        <group>
                            <group>
                                <field name="type" invisible="1"/>
                                <field name="model_id"/>
                                <field name="state"/>
                            </group>
                            <group>
                                <field name="condition"/>
                                <field name="sequence"/>
                            </group>
                        </group>



                        <notebook colspan="4">
                            <page string="Python Code" name="code" autofocus="autofocus">
                                <field name="code" widget="ace" options="{'mode': 'python'}" placeholder="Enter Python code here. Help about Python expression is available in the help tab of this document."/>
                            </page>


                            <page string="Help">
                                <group>
                                    <div style="margin-top: 4px;">
                                        <h3>Help with Python expressions.</h3>
                                        <p>Various fields may use Python code or Python expressions. The following variables can be used:</p>
                                        <ul>
                                            <li>env: Odoo Environement on which the action is triggered</li>
                                            <li>record: browse_record of the record on which the action is triggered</li>
                                            <li>time, datetime, timezone: Python module</li>
                                            <li>log(message, level='info'): a logging function to create ir_logging records</li>
                                        </ul>
                                        <div>
                                            <p>Example of condition expression using Python</p>
                                            <ul>
                                                <li>condition: True</li>
                                                <li>condition: record.list_price &gt; 5000</li>
                                            </ul>
                                        </div>
                                        <div >
                                            <p>Example of python code</p>
												<code style="white-space: pre-wrap">
													partner_name = record.name + '_code'
													env["res.partner"].create({"name": partner_name})
												</code>
                                        </div>
                                    </div>
                                    <group>
                                        <h3 colspan="2">Dynamic expression builder</h3>
                                        <p colspan="2" >
                                            Please set the Base Model of the action to enable the dynamic expression buidler.
                                        </p>
                                        <field name="model_object_field" />
                                        <field name="sub_object" readonly="1" />
                                        <field name="sub_model_object_field" />
                                        <field name="copyvalue" />
                                        <h3 colspan="2">Find the ID of a record in the database</h3>
                                        <field name="id_object"/>
                                        <field name="id_value"/>
                                    </group>
                                </group>
                            </page>
                        </notebook>
                    </sheet>
				</form>
			</field>
	</record>
  -->

		<!-- Indicateurs-->
	   <record model="ir.ui.view" id="indicateur_form_view">
			<field name="name">indicator.form</field>
			<field name="model">php_evaluation.indicator</field>
			<field name="arch" type="xml">
				<form string="Indicateur Form">
					<sheet>
						<group>
							<field name="name"/>
						</group>

						<notebook>
							<page string="Questions">
								<group>
									<field name="questions"/>
								</group>
							</page>

                            <page string="Niveau du'Agregation ">
								<field name="agregation_level_id"/>
							</page>
							<page string="indicateurs">
								<group>
									<field name="parent_indicator_id"/>
								</group>
							</page>
							<page string="Valeur">
								<field name="calculation_function" />
								<field name="valeur"/>
							</page>
						</notebook>
					</sheet>
				</form>
			</field>
		</record>
		
		
		<record model="ir.ui.view" id="indicator_tree_view">
			<field name="name">indicator.tree</field>
			<field name="model">php_evaluation.indicator</field>
			<field name="arch" type="xml">
				<tree string="Course Tree">
					<field name="id"/>
					<field name="name"/>
				</tree>
			</field>
		</record>


		<record id="indicator_dashboard_kanban_view" model="ir.ui.view">
        <field name="name">indicator.dashboard.kanban</field>
        <field name="model">php_evaluation.indicator</field>
        <field name="arch" type="xml">
            <kanban create="false" class="oe_background_grey o_kanban_dashboard o_account_kanban">
                <field name="id"/>
                <field name="name"/>
                <!--
                <field name="type"/>
				-->
                <field name="show_on_dashboard"/>
                <field name="kanban_dashboard"/>
            
                <templates>
                    <t t-name="kanban-box" >
                        
                        <div t-attf-class="#{kanban_color(0)}">
                            <t t-value="JSON.parse(record.kanban_dashboard.raw_value)" t-set="dashboard"/>
                            <t t-call="IndicateurTop"/>
                            <div class="container o_kanban_card_content o_visible">
                                <t  t-call="IndicateurBodyGraph"/>
                            </div>
                            <div class="container o_kanban_card_manage_pane o_invisible">
                                <t t-call="IndicateurManage"/>
                            </div>

                            </div>
                        
                    </t>

                    <t t-name="IndicateurManage">
                        
                    </t>

                    <t t-name="IndicateurTop">
                        <div class="o_kanban_card_header">
                            <div class="o_kanban_card_header_title">
                                <div class="o_primary">
                                    <a type="object" name="open_action"><field name="name"/></a>
                                </div>
                                <!--<div class="o_secondary" t-att-title="dashboard.title"> -->
                                    <!--<field name="type"/>-->
                                <!--</div>-->
                            </div>
                            <div class="o_kanban_manage_button_section">
                                <a class="o_kanban_manage_toggle_button" href="#">More <i class="fa fa-caret-down"/></a>
                            </div>
                        </div>
                    </t>

                    <t t-name="IndicateurBodyGraph">
                        <div class="o_kanban_graph_section">
                           <field name="kanban_dashboard_graph"  widget="indicateur_dashboard_graph"/>
                        </div>
						
                    </t>
                </templates>
            </kanban>
        </field>
    	</record> 


<record id="agregation_level_dashboard_kanban_view" model="ir.ui.view">
        <field name="name">agregation_level.dashboard.kanban</field>
        <field name="model">php_evaluation.agregation_level</field>
        <field name="arch" type="xml">
            <kanban create="false" class="oe_background_grey o_kanban_dashboard o_account_kanban">
                <field name="id"/>
                <field name="name"/>
				-->
                <!--
                <field name="type"/>
				-->

                <field name="show_on_dashboard"/>
                <field name="kanban_dashboard"/>
            
                <templates>
                    <t t-name="kanban-box">
                        <div t-attf-class="#{kanban_color(0)}">
                            <t t-value="JSON.parse(record.kanban_dashboard.raw_value)" t-set="dashboard"/> 
                            <!--<t t-value="record.type.raw_value" t-set="journal_type"/>-->
                            <t t-call="AgregationLevelTop"/>
                            <div class="container o_kanban_card_content o_visible">
                                <t  t-call="AgregationLevelBodyGraph"/>
                            </div>
                            <div class="container o_kanban_card_manage_pane o_invisible">
                                <t t-call="AgregationLevelManage"/>
                            </div>
                        </div>
                    </t>

                    <t t-name="AgregationLevelManage">
                        
                    </t>

                    <t t-name="AgregationLevelTop">
                        <div class="o_kanban_card_header">
                            <div class="o_kanban_card_header_title">
                                <div class="o_primary">
                                    <a type="object" name="open_action"><field name="name"/></a>
                                </div>
                                
                            </div>
                            <div class="o_kanban_manage_button_section">
                                <a class="o_kanban_manage_toggle_button" href="#">More <i class="fa fa-caret-down"/></a>
                            </div>
                        </div>
                    </t>

                    <t t-name="AgregationLevelBodyGraph">
                        <div class="o_kanban_graph_section">
                           <field name="kanban_dashboard_graph"  widget="agregation_level_dashboard"/>
                        </div>
						
                    </t>
                </templates>
            </kanban>
        </field>
    	</record> 
	   
		




		 <!-- Agregation Level-->
	   <record model="ir.ui.view" id="agregation_level_form_view">
			<field name="name">agregation_level.form</field>
			<field name="model">php_evaluation.agregation_level</field>
			<field name="arch" type="xml">
				<form string="Agregation Level Form">
					<sheet>
						<group>
							<field name="name" class="oe_inline"/>
							
							<field name="agregation_level_parent_parent_id"/>
							
							<field name="agregation_level_childs_ids"/>
							
						</group>

						<group>
							
						</group>
					</sheet>
				</form>
			</field>
		</record>
		
		
		<record model="ir.ui.view" id="agregation_level_tree_view">
			<field name="name">agregation_level.tree</field>
			<field name="model">php_evaluation.agregation_level</field>
			<field name="arch" type="xml">
				<tree string="Agregation Level Tree">
					<field name="id"/>
					<field name="name"/>
				</tree>
			</field>
		</record>


	<!-- Evaluation Action and Menu Items -->	


        <menuitem name="PNC Evaluation" id="menu_php_evaluation" sequence="70"   web_icon="php_evaluation,static/description/icon.png"/>


        <menuitem name="Surveys" id="menu_php_evaluation_form" action="survey.action_survey_form" parent="menu_php_evaluation" sequence="1"/>
        <menuitem name="Answers" id="menu_php_evaluation_type_form1" action="survey.action_survey_user_input" parent="menu_php_evaluation" sequence="1"/>


	
		<record model="ir.actions.act_window" id="action_php_evaluation_indicators">
			<field name="name">Indicateurs</field>
			<field name="res_model">php_evaluation.indicator</field>
			<field name="view_mode">tree,form</field>
		</record>

		<menuitem name="Indicateurs" id="menu_survey_indicateurs"
		 action="action_php_evaluation_indicators" parent="menu_php_evaluation" sequence="2"/>

		 <record model="ir.actions.act_window" id="action_php_evaluation_indicators_dashboard">
			<field name="name">Indicateurs</field>
			<field name="res_model">php_evaluation.indicator</field>
			<field name="view_mode">kanban</field>
		</record>

		 <menuitem name="Indicateurs Dashboard" id="menu_php_evaluation_indicators_dashboard"
		 action="action_php_evaluation_indicators_dashboard" parent="menu_php_evaluation" sequence="3"/>

		 

		  <record model="ir.actions.act_window" id="action_php_evaluation_agregation_level_dashboard">
			<field name="name">Niveaux du'Agregation</field>
			<field name="res_model">php_evaluation.agregation_level</field>
			<field name="view_mode">graph</field>
		</record>

	   <menuitem name="Niveaux du'Agregation Dashboard" id="menu_agregation_level_dashboard"
		 action="action_php_evaluation_agregation_level_dashboard" parent="menu_php_evaluation" sequence="5"/>

		 <record model="ir.actions.act_window" id="action_php_evaluation_agregation_levels">
			<field name="name">Niveaux d Agregation</field>
			<field name="res_model">php_evaluation.agregation_level</field>
			<field name="view_mode">tree,form</field>
		</record>

		<menuitem name="Niveaux d Agregation" id="menu_php_evaluation_agregation_levels"
		 action="action_php_evaluation_agregation_levels" parent="menu_php_evaluation" sequence="6"/>




		
  </data>
</odoo>